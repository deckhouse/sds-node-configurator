---
title: "Модуль sds-node-configurator: Сценарии использования"
linkTitle: "Сценарии использования"
---

{{< alert level="warning" >}}
Работоспособность модуля гарантируется только при использовании стоковых ядер, поставляемых вместе с [поддерживаемыми дистрибутивами](https://deckhouse.ru/documentation/v1/supported_versions.html#linux).

Работоспособность модуля при использовании других ядер или дистрибутивов возможна, но не гарантируется.
{{< /alert >}}

Примеры конфигурирования дисковой подсистемы на узлах кластера Kubernetes. 

{{< alert level="warning" >}}
ВАЖНО! Если вы создаете виртуальные машины клонированием — необходимо делать разный uuid у vg, для этого выполните команду  (можно добавить в cloud init).
{{< /alert >}}

## Несколько одинаковых дисков

### Рекомендованный сценарий

* Собирается зеркало из дисков целиком (аппаратно или программно) и используется как для корневой системы, так и для данных.
* Создается vg с названием `main`, на нее ставится тег `storage.deckhouse.io/enabled=true`.
* Создается lv `root` под корневую ФС.
* Дальше эта vg автоматически появляется в Deckhouse и может быть использована для всех видов SDS.

#### Плюсы и минусы сценария

| Плюсы                     | Минусы      |
|---------------------------|-------------|
| Надежно  | Overhead по месту на диске для SDS, которые сами реплицируют данные  |
| Просто в настройке и использовании |  |
| Удобно распределять (и перераспределять) место между разными SDS |  |

### Гибридный сценарий для экономии места

* Диски разделяются на два раздела.
* Первые разделы
  * Собираются в зеркало
  * На них создается vg `main-safe`
  * Создается lv `root` под корневую ФС, на нее ставится тег `storage.deckhouse.io/enabled=true`.
  * Дальше эта vg автоматически появляется в Deckhouse и используется для `sds-local-volume` или для `sds-replicated-volume` при replication: None.
* Вторые разделы
  * Не собираются в зеркало
  * Из них создается vg main-unsafe, на нее ставится тег `storage.deckhouse.io/enabled=true`.
  * Дальше эта vg автоматически появляется в Deckhouse и используется для `sds-replicated-volume` при replication `Availability` или `ConsistencyAndAvailability` и `sds-elastic`.

#### Плюсы и минусы сценария

| Плюсы                     | Минусы      |
|---------------------------|-------------|
| Надежно  | Сложно в настройке и использовании  |
| Место используется максимально эффективно | Очень сложно перераспределять место между safe и unsafe разделами |

## Несколько дисков разных типов

### 2 HDD, 2 SATA SSD


### 2 HDD, 2 SATA SSD, 2 NVMe SSD

<!-- Под корневую систему выделено отдельное зеркало. Помимо этого есть дополнительные диски разных типов под SDS.
* Для `sds-local-volume` или для `sds-replicated-volume` при replication: None
  * Создать зеркало  -->




<!-- Под систему
raid
Дополнительные диски под данные
Если sds не реплицирует — то лучше raid
Кейс:
hdd
ssd
nvme
Кейс
две разных группы ssd
Кейс
много nvme в кучу -->
